#!/bin/bash
# JAR file decompiler
# by zollak

# Check arguments
if [ $# -eq 0 ]; then
    echo -e "No arguments supplied.\nUSAGE: $0 <jar_file>"
    exit 1
fi

# Decompile jar file with 'jad'
JAR=$1
unzip -d $JAR.tmp $JAR
pushd $JAR.tmp
for f in `find . -name '*.class'`; do
    jad -d $(dirname $f) -s java -lnc $f
done
popd

# Move output folder to one tar file (because too much file uses lots of inode)
tar -cvf $JAR.tmp.tar $JAR.tmp --remove-files
